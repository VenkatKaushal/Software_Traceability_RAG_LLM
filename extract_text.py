response_text = """
    ${'EA1.txt': Response(response='<<INSTRUCTIONS>>\nContext information is below:\n---------------------\nClass Name: Entry\n\nMethod Name: PrePayment\nSignature: Entry.PrePayment(long,Vehicle)\nClass Name: Entry\n---------------------\nUsing ONLY this context (no prior knowledge), answer:\n\nWhat are the names of the classes that are related to the following use case requirement?\nA user arrives at the parking facility and selects the entry gate. The system verifies if the fee has been prepaid or requires payment. The user is assigned a parking slot based on vehicle type.\n\nProvide the answer in a list format and provide ONLY the list of class names as a JSON list.\n[<"Class 1 Name">, <"Class 2 Name">, ... <"Class N Name">] where N can be up to 10.\n\n\nDo NOT repeat these instructions.\n<<ANSWER>>\n["Entry"]', source_nodes=[NodeWithScore(node=TextNode(id_='256e4708-602c-47bc-be37-6dbf25df116e', embedding=None, metadata={'File Name': 'Entry.java', 'Class Name': 'Entry', 'methods': "[{'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Entry.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Entry.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PrePayment', 'type': 'Method', 'Signature': 'Entry.PrePayment(long,Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'AssignInTime', 'type': 'Method', 'Signature': 'Entry.AssignInTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}]", 'method_calls': '{}'}, excluded_embed_metadata_keys=['File Name', 'method_calls', 'methods'], excluded_llm_metadata_keys=['File Name', 'method_calls', 'methods'], relationships={<NodeRelationship.SOURCE: '1'>: RelatedNodeInfo(node_id='fa2ba0e5-e6d3-426e-bfda-157df00ec18d', node_type='4', metadata={'File Name': 'Entry.java', 'Class Name': 'Entry', 'methods': "[{'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Entry.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Entry.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PrePayment', 'type': 'Method', 'Signature': 'Entry.PrePayment(long,Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'AssignInTime', 'type': 'Method', 'Signature': 'Entry.AssignInTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}]", 'method_calls': '{}'}, hash='74aad1777bb649d2ec02ac7afdd5233bcc133e6223966d3a382612af87e9ec44'), <NodeRelationship.PREVIOUS: '2'>: RelatedNodeInfo(node_id='f198f4ff-c0bb-486a-84e9-bfc69807b697', node_type='1', metadata={'File Name': 'Entry.java', 'Class Name': 'Entry', 'methods': "[{'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Entry.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Entry.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PrePayment', 'type': 'Method', 'Signature': 'Entry.PrePayment(long,Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'AssignInTime', 'type': 'Method', 'Signature': 'Entry.AssignInTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}]", 'method_calls': '{}'}, hash='756fd072cb282313b9ef021b460be2b9723ce2951b4d3600d740a4630c5b6d11'), <NodeRelationship.NEXT: '3'>: RelatedNodeInfo(node_id='d36d0a01-1885-4c31-a77e-a76861e535ba', node_type='1', metadata={}, hash='ea6270365996bec008a2bc3c8fbacab61de1c04ab2f3d05d6cf15f5a328abbad')}, metadata_template='{key}: {value}', metadata_separator='\n', text='Method Name: PrePayment\nSignature: Entry.PrePayment(long,Vehicle)\nClass Name: Entry', mimetype='text/plain', start_char_idx=205, end_char_idx=288, metadata_seperator='\n', text_template='{metadata_str}\n\n{content}'), score=0.5278371590289807)], metadata={'256e4708-602c-47bc-be37-6dbf25df116e': {'File Name': 'Entry.java', 'Class Name': 'Entry', 'methods': "[{'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Entry.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Entry.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PrePayment', 'type': 'Method', 'Signature': 'Entry.PrePayment(long,Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'AssignInTime', 'type': 'Method', 'Signature': 'Entry.AssignInTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}]", 'method_calls': '{}'}}), 'EA2.txt': Response(response='<<INSTRUCTIONS>>\nContext information is below:\n---------------------\nClass Name: Exit\n\nClass Name: Exit\n\n\n\nMethods: \n\nMethod Name: CheckPayment\nSignature: Exit.CheckPayment(Vehicle,int)\nClass Name: Exit\n---------------------\nUsing ONLY this context (no prior knowledge), answer:\n\nWhat are the names of the classes that are related to the following use case requirement?\nThe user proceeds to an exit gate where the system verifies parking duration and generates a bill. Any outstanding fees must be settled before exit approval is granted.\n\nProvide the answer in a list format and provide ONLY the list of class names as a JSON list.\n[<"Class 1 Name">, <"Class 2 Name">, ... <"Class N Name">] where N can be up to 10.\n\n\nDo NOT repeat these instructions.\n<<ANSWER>>\n["Exit"]', source_nodes=[NodeWithScore(node=TextNode(id_='135622ab-8022-4014-aae7-aaf1c0052d8b', embedding=None, metadata={'File Name': 'Exit.java', 'Class Name': 'Exit', 'methods': "[{'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Exit.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)'], 'calls': ['Exit.GenerateBill(long,int)']}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'AssignOutTime', 'type': 'Method', 'Signature': 'Exit.AssignOutTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Exit.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'GenerateBill', 'type': 'Method', 'Signature': 'Exit.GenerateBill(long,int)', 'Method Docstring': None, 'called_by': ['Exit.CheckPayment(Vehicle,int)'], 'calls': []}]", 'method_calls': '{}'}, excluded_embed_metadata_keys=['File Name', 'method_calls', 'methods'], excluded_llm_metadata_keys=['File Name', 'method_calls', 'methods'], relationships={<NodeRelationship.SOURCE: '1'>: RelatedNodeInfo(node_id='056892bf-d691-40ab-ab57-3fbd7bc0d766', node_type='4', metadata={'File Name': 'Exit.java', 'Class Name': 'Exit', 'methods': "[{'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Exit.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)'], 'calls': ['Exit.GenerateBill(long,int)']}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'AssignOutTime', 'type': 'Method', 'Signature': 'Exit.AssignOutTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Exit.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'GenerateBill', 'type': 'Method', 'Signature': 'Exit.GenerateBill(long,int)', 'Method Docstring': None, 'called_by': ['Exit.CheckPayment(Vehicle,int)'], 'calls': []}]", 'method_calls': '{}'}, hash='99122077f214a0d8bbc07821b907315ffd625accefb271c1971b02fadc44c2cf'), <NodeRelationship.NEXT: '3'>: RelatedNodeInfo(node_id='97a951b7-3389-4116-a85d-da28af033be6', node_type='1', metadata={}, hash='5a0201fe3c374d3e979c0c53e5aafe0826084cb2297536c84b02f9e3f2007844')}, metadata_template='{key}: {value}', metadata_separator='\n', text='Class Name: Exit\n\n\n\nMethods: \n\nMethod Name: CheckPayment\nSignature: Exit.CheckPayment(Vehicle,int)\nClass Name: Exit', mimetype='text/plain', start_char_idx=0, end_char_idx=115, metadata_seperator='\n', text_template='{metadata_str}\n\n{content}'), score=0.5136607664233149)], metadata={'135622ab-8022-4014-aae7-aaf1c0052d8b': {'File Name': 'Exit.java', 'Class Name': 'Exit', 'methods': "[{'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Exit.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)'], 'calls': ['Exit.GenerateBill(long,int)']}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'AssignOutTime', 'type': 'Method', 'Signature': 'Exit.AssignOutTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Exit.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Exit', 'File Name': 'Exit.java', 'Method Name': 'GenerateBill', 'type': 'Method', 'Signature': 'Exit.GenerateBill(long,int)', 'Method Docstring': None, 'called_by': ['Exit.CheckPayment(Vehicle,int)'], 'calls': []}]", 'method_calls': '{}'}}), 'EA3.txt': Response(response='<<INSTRUCTIONS>>\nContext information is below:\n---------------------\nClass Name: Vehicle\n\nClass Name: Vehicle\nAttributes: \nVehicleSpace: int\nAllocatedParkingLot: int\nInTime: long\nOutTime: long\nBillPayed: long\n---------------------\nUsing ONLY this context (no prior knowledge), answer:\n\nWhat are the names of the classes that are related to the following use case requirement?\nThe system dynamically assigns available slots based on vehicle type, ensuring proper space utilization. If no suitable slot is available, the user is prompted to wait or choose another floor.\n\nProvide the answer in a list format and provide ONLY the list of class names as a JSON list.\n[<"Class 1 Name">, <"Class 2 Name">, ... <"Class N Name">] where N can be up to 10.\n\n\nDo NOT repeat these instructions.\n<<ANSWER>>\n["Vehicle"]', source_nodes=[NodeWithScore(node=TextNode(id_='3b9137b9-b627-450a-87f4-b97d09a6138c', embedding=None, metadata={'File Name': 'Vehicle.java', 'Class Name': 'Vehicle', 'methods': "[{'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'PayFee', 'type': 'Method', 'Signature': 'Vehicle.PayFee()', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'getVehicleSpace', 'type': 'Method', 'Signature': 'Vehicle.getVehicleSpace()', 'Method Docstring': None}, {'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'ChargeVehicle', 'type': 'Method', 'Signature': 'Vehicle.ChargeVehicle(int,int)', 'Method Docstring': None}]", 'method_calls': '{}'}, excluded_embed_metadata_keys=['File Name', 'method_calls', 'methods'], excluded_llm_metadata_keys=['File Name', 'method_calls', 'methods'], relationships={<NodeRelationship.SOURCE: '1'>: RelatedNodeInfo(node_id='93049123-dc44-4f51-92d8-ecfdfbd0e1b1', node_type='4', metadata={'File Name': 'Vehicle.java', 'Class Name': 'Vehicle', 'methods': "[{'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'PayFee', 'type': 'Method', 'Signature': 'Vehicle.PayFee()', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'getVehicleSpace', 'type': 'Method', 'Signature': 'Vehicle.getVehicleSpace()', 'Method Docstring': None}, {'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'ChargeVehicle', 'type': 'Method', 'Signature': 'Vehicle.ChargeVehicle(int,int)', 'Method Docstring': None}]", 'method_calls': '{}'}, hash='3927ee401463d4b500e8c83a0bb32a4e517c3326c7c4591c0dcb5fb7e0aa44d8'), <NodeRelationship.NEXT: '3'>: RelatedNodeInfo(node_id='ac04948e-2258-4ec7-8bec-51153cc48c7e', node_type='1', metadata={}, hash='bafc27fe11bef8ee8cf8bc0b582388ce8471a38c00526e2d6b6f2f59482b78cf')}, metadata_template='{key}: {value}', metadata_separator='\n', text='Class Name: Vehicle\nAttributes: \nVehicleSpace: int\nAllocatedParkingLot: int\nInTime: long\nOutTime: long\nBillPayed: long', mimetype='text/plain', start_char_idx=0, end_char_idx=118, metadata_seperator='\n', text_template='{metadata_str}\n\n{content}'), score=0.46649064818957264)], metadata={'3b9137b9-b627-450a-87f4-b97d09a6138c': {'File Name': 'Vehicle.java', 'Class Name': 'Vehicle', 'methods': "[{'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'PayFee', 'type': 'Method', 'Signature': 'Vehicle.PayFee()', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'getVehicleSpace', 'type': 'Method', 'Signature': 'Vehicle.getVehicleSpace()', 'Method Docstring': None}, {'Class Name': 'Vehicle', 'File Name': 'Vehicle.java', 'Method Name': 'ChargeVehicle', 'type': 'Method', 'Signature': 'Vehicle.ChargeVehicle(int,int)', 'Method Docstring': None}]", 'method_calls': '{}'}}), 'EA4.txt': Response(response='<<INSTRUCTIONS>>\nContext information is below:\n---------------------\nClass Name: Entry\n\nMethod Name: PrePayment\nSignature: Entry.PrePayment(long,Vehicle)\nClass Name: Entry\n---------------------\nUsing ONLY this context (no prior knowledge), answer:\n\nWhat are the names of the classes that are related to the following use case requirement?\nUsers can prepay for parking or pay upon exit using different payment methods (card, attendant, or portal). The system maintains a record of payments and balances.\n\nProvide the answer in a list format and provide ONLY the list of class names as a JSON list.\n[<"Class 1 Name">, <"Class 2 Name">, ... <"Class N Name">] where N can be up to 10.\n\n\nDo NOT repeat these instructions.\n<<ANSWER>>\n["Entry"]\n\nThe context only provides the information about the Entry class and its method \'PrePayment\'. It does not mention any other class that might be related to handling different payment methods or maintaining records of payments and balances. Therefore, based on the given context, only the Entry class can be identified as related to the use case requirement.', source_nodes=[NodeWithScore(node=TextNode(id_='af1a6316-7e33-44c1-9be9-85c69ed82115', embedding=None, metadata={'File Name': 'Entry.java', 'Class Name': 'Entry', 'methods': "[{'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Entry.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Entry.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PrePayment', 'type': 'Method', 'Signature': 'Entry.PrePayment(long,Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'AssignInTime', 'type': 'Method', 'Signature': 'Entry.AssignInTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}]", 'method_calls': '{}'}, excluded_embed_metadata_keys=['File Name', 'method_calls', 'methods'], excluded_llm_metadata_keys=['File Name', 'method_calls', 'methods'], relationships={<NodeRelationship.SOURCE: '1'>: RelatedNodeInfo(node_id='44d3a08b-935d-4ec1-bc1e-744bb74eea54', node_type='4', metadata={'File Name': 'Entry.java', 'Class Name': 'Entry', 'methods': "[{'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Entry.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Entry.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PrePayment', 'type': 'Method', 'Signature': 'Entry.PrePayment(long,Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'AssignInTime', 'type': 'Method', 'Signature': 'Entry.AssignInTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}]", 'method_calls': '{}'}, hash='74aad1777bb649d2ec02ac7afdd5233bcc133e6223966d3a382612af87e9ec44'), <NodeRelationship.PREVIOUS: '2'>: RelatedNodeInfo(node_id='e79f6f40-914e-4c2f-ac9e-02607d8e1f03', node_type='1', metadata={'File Name': 'Entry.java', 'Class Name': 'Entry', 'methods': "[{'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Entry.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Entry.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PrePayment', 'type': 'Method', 'Signature': 'Entry.PrePayment(long,Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'AssignInTime', 'type': 'Method', 'Signature': 'Entry.AssignInTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}]", 'method_calls': '{}'}, hash='756fd072cb282313b9ef021b460be2b9723ce2951b4d3600d740a4630c5b6d11'), <NodeRelationship.NEXT: '3'>: RelatedNodeInfo(node_id='6329214b-e6fa-4c13-8238-7c65d88e87c7', node_type='1', metadata={}, hash='ea6270365996bec008a2bc3c8fbacab61de1c04ab2f3d05d6cf15f5a328abbad')}, metadata_template='{key}: {value}', metadata_separator='\n', text='Method Name: PrePayment\nSignature: Entry.PrePayment(long,Vehicle)\nClass Name: Entry', mimetype='text/plain', start_char_idx=205, end_char_idx=288, metadata_seperator='\n', text_template='{metadata_str}\n\n{content}'), score=0.5420724958739845)], metadata={'af1a6316-7e33-44c1-9be9-85c69ed82115': {'File Name': 'Entry.java', 'Class Name': 'Entry', 'methods': "[{'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'CheckPayment', 'type': 'Method', 'Signature': 'Entry.CheckPayment(Vehicle,int)', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.CheckPayment(Vehicle,int)']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PaymentOptions', 'type': 'Method', 'Signature': 'Entry.PaymentOptions()', 'Method Docstring': None, 'calls': [], 'called_by': ['Entries_Exits.PaymentOptions()']}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'PrePayment', 'type': 'Method', 'Signature': 'Entry.PrePayment(long,Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}, {'Class Name': 'Entry', 'File Name': 'Entry.java', 'Method Name': 'AssignInTime', 'type': 'Method', 'Signature': 'Entry.AssignInTime(Vehicle)', 'Method Docstring': None, 'calls': [], 'called_by': []}]", 'method_calls': '{}'}}), 'EA5.txt': Response(response='<<INSTRUCTIONS>>\nContext information is below:\n---------------------\nClass Name: ElectricCar\n\nClass Name: ElectricCar\nAttributes: \ncharge: int\n\n\n\nMethods:\n---------------------\nUsing ONLY this context (no prior knowledge), answer:\n\nWhat are the names of the classes that are related to the following use case requirement?\nIf a user parks an electric vehicle, they have the option to charge it. The system calculates the cost based on units consumed and updates the final bill accordingly.\n\nProvide the answer in a list format and provide ONLY the list of class names as a JSON list.\n[<"Class 1 Name">, <"Class 2 Name">, ... <"Class N Name">] where N can be up to 10.\n\n\nDo NOT repeat these instructions.\n<<ANSWER>>\n["ElectricCar"]', source_nodes=[NodeWithScore(node=TextNode(id_='d45c43be-8340-4d0e-944b-6df94db3fe4a', embedding=None, metadata={'File Name': 'ElectricCar.java', 'Class Name': 'ElectricCar', 'methods': '[]', 'method_calls': '{}'}, excluded_embed_metadata_keys=['File Name', 'method_calls', 'methods'], excluded_llm_metadata_keys=['File Name', 'method_calls', 'methods'], relationships={<NodeRelationship.SOURCE: '1'>: RelatedNodeInfo(node_id='244a881e-326a-4359-8747-4f4f94d7f896', node_type='4', metadata={'File Name': 'ElectricCar.java', 'Class Name': 'ElectricCar', 'methods': '[]', 'method_calls': '{}'}, hash='fa5cfc30b020d0395d6ed6b599e5b8443bfa80bd1661a31150e2794b5d67b64c')}, metadata_template='{key}: {value}', metadata_separator='\n', text='Class Name: ElectricCar\nAttributes: \ncharge: int\n\n\n\nMethods:', mimetype='text/plain', start_char_idx=0, end_char_idx=60, metadata_seperator='\n', text_template='{metadata_str}\n\n{content}'), score=0.48780442049112455)], metadata={'d45c43be-8340-4d0e-944b-6df94db3fe4a': {'File Name': 'ElectricCar.java', 'Class Name': 'ElectricCar', 'methods': '[]', 'method_calls': '{}'}})}
"""





import re

def extract_filenames_and_classnames(response_text):
    # Find all filename matches (matching EA1.txt, EA2.txt, etc.)
    filenames = re.findall(r"'?(EA\d+\.txt)'?", response_text)
    
    # Split the text based on filenames
    file_sections = re.split(r"'?(EA\d+\.txt)'?", response_text)[1:]
    
    filename_class_map = {}
    
    for i in range(0, len(file_sections), 2):
        filename = file_sections[i].strip()
        section = file_sections[i + 1] if i + 1 < len(file_sections) else ""
        
        # Extract class names between the filename and next filename or end of text
        classnames = re.findall(r"<<ANSWER>>\s*(\[.*?\])", section, re.DOTALL)
        filename_class_map[filename] = classnames[0] if classnames else []
    
    return filename_class_map



# Extract filenames and corresponding class names
data_map = extract_filenames_and_classnames(response_text)

# Print cleaned output
print(data_map)